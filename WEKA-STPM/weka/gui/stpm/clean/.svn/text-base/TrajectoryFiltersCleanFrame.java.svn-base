/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * TrajectoryFiltersClean.java
 *
 * Created on 03/06/2010, 18:39:48
 */
package weka.gui.stpm.clean;

import weka.gui.stpm.*;
import javax.swing.JOptionPane;

/**
 *
 * @author hercules
 */
public class TrajectoryFiltersCleanFrame extends javax.swing.JFrame {

    private TrajectoryClean trajectoryClean;

    /** Creates new form TrajectoryFiltersClean */
    public TrajectoryFiltersCleanFrame(TrajectoryClean trajectoryClean) {
        this.trajectoryClean = trajectoryClean;
        initComponents();
        initEspecifics();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanelFiltrosEnteDois = new javax.swing.JPanel();
        jLabelVelocidadeMaxima = new javax.swing.JLabel();
        jLabelTempo = new javax.swing.JLabel();
        jLabelQuantoPontos = new javax.swing.JLabel();
        jLabelGostariaRetirar = new javax.swing.JLabel();
        jFormattedTextFieldVElcidadeMaxima = new javax.swing.JFormattedTextField();
        jFormattedTextFieldTempo = new javax.swing.JFormattedTextField();
        jFormattedTextFieldQtdePontos = new javax.swing.JFormattedTextField();
        jButtonFiltrar = new javax.swing.JButton();
        jLabelMensagem = new javax.swing.JLabel();
        jPanelFiltrosToda = new javax.swing.JPanel();
        jLabelPorcentagem = new javax.swing.JLabel();
        jLabelPordentagem = new javax.swing.JLabel();
        jFormattedTextFieldPorcentagem = new javax.swing.JFormattedTextField();
        jLabelNmTabela = new javax.swing.JLabel();
        jLabelnmTabelas = new javax.swing.JLabel();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("TrajectoryClean");
        setName("TrajectoryClean"); // NOI18N

        jPanelFiltrosEnteDois.setBorder(javax.swing.BorderFactory.createTitledBorder("Clearing between two points"));

        jLabelVelocidadeMaxima.setText("Max. Speed:");

        jLabelTempo.setText("Time :");

        jLabelQuantoPontos.setText(" How many points you");

        jLabelGostariaRetirar.setText(" would like to discard ?");

        jFormattedTextFieldVElcidadeMaxima.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0.00"))));
        jFormattedTextFieldVElcidadeMaxima.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jFormattedTextFieldVElcidadeMaximaActionPerformed(evt);
            }
        });

        jFormattedTextFieldTempo.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0.00"))));

        jFormattedTextFieldQtdePontos.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0"))));
        jFormattedTextFieldQtdePontos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jFormattedTextFieldQtdePontosActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanelFiltrosEnteDoisLayout = new javax.swing.GroupLayout(jPanelFiltrosEnteDois);
        jPanelFiltrosEnteDois.setLayout(jPanelFiltrosEnteDoisLayout);
        jPanelFiltrosEnteDoisLayout.setHorizontalGroup(
            jPanelFiltrosEnteDoisLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelFiltrosEnteDoisLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelFiltrosEnteDoisLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabelGostariaRetirar)
                    .addComponent(jLabelVelocidadeMaxima)
                    .addComponent(jLabelTempo)
                    .addComponent(jLabelQuantoPontos, javax.swing.GroupLayout.PREFERRED_SIZE, 112, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(21, 21, 21)
                .addGroup(jPanelFiltrosEnteDoisLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jFormattedTextFieldQtdePontos)
                    .addComponent(jFormattedTextFieldTempo)
                    .addComponent(jFormattedTextFieldVElcidadeMaxima, javax.swing.GroupLayout.PREFERRED_SIZE, 67, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(59, Short.MAX_VALUE))
        );
        jPanelFiltrosEnteDoisLayout.setVerticalGroup(
            jPanelFiltrosEnteDoisLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelFiltrosEnteDoisLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanelFiltrosEnteDoisLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabelVelocidadeMaxima)
                    .addComponent(jFormattedTextFieldVElcidadeMaxima, javax.swing.GroupLayout.PREFERRED_SIZE, 20, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelFiltrosEnteDoisLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabelTempo, javax.swing.GroupLayout.PREFERRED_SIZE, 12, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jFormattedTextFieldTempo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanelFiltrosEnteDoisLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanelFiltrosEnteDoisLayout.createSequentialGroup()
                        .addComponent(jLabelQuantoPontos, javax.swing.GroupLayout.PREFERRED_SIZE, 14, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(1, 1, 1)
                        .addComponent(jLabelGostariaRetirar, javax.swing.GroupLayout.PREFERRED_SIZE, 14, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(jFormattedTextFieldQtdePontos, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        jButtonFiltrar.setText("Clean");
        jButtonFiltrar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mousePressed(java.awt.event.MouseEvent evt) {
                jButtonFiltrarMousePressed(evt);
            }
        });
        jButtonFiltrar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButtonFiltrarActionPerformed(evt);
            }
        });

        jLabelMensagem.setText(" ");

        jPanelFiltrosToda.setBorder(javax.swing.BorderFactory.createTitledBorder("Cleaning all trajectory"));

        jLabelPorcentagem.setText("Percentage of clean :");

        jLabelPordentagem.setText("%");

        jFormattedTextFieldPorcentagem.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(new javax.swing.text.NumberFormatter(new java.text.DecimalFormat("#0.00"))));

        javax.swing.GroupLayout jPanelFiltrosTodaLayout = new javax.swing.GroupLayout(jPanelFiltrosToda);
        jPanelFiltrosToda.setLayout(jPanelFiltrosTodaLayout);
        jPanelFiltrosTodaLayout.setHorizontalGroup(
            jPanelFiltrosTodaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelFiltrosTodaLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabelPorcentagem, javax.swing.GroupLayout.PREFERRED_SIZE, 126, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addComponent(jFormattedTextFieldPorcentagem, javax.swing.GroupLayout.PREFERRED_SIZE, 63, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabelPordentagem)
                .addContainerGap(45, Short.MAX_VALUE))
        );
        jPanelFiltrosTodaLayout.setVerticalGroup(
            jPanelFiltrosTodaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanelFiltrosTodaLayout.createSequentialGroup()
                .addGroup(jPanelFiltrosTodaLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabelPorcentagem)
                    .addComponent(jLabelPordentagem)
                    .addComponent(jFormattedTextFieldPorcentagem, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(26, Short.MAX_VALUE))
        );

        jLabelNmTabela.setText("Trajectories dirty:");

        jLabelnmTabelas.setFont(new java.awt.Font("Tahoma", 2, 14));
        jLabelnmTabelas.setText(" ");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jPanelFiltrosEnteDois, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jPanelFiltrosToda, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(jLabelMensagem, javax.swing.GroupLayout.DEFAULT_SIZE, 281, Short.MAX_VALUE)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addComponent(jLabelNmTabela, javax.swing.GroupLayout.DEFAULT_SIZE, 131, Short.MAX_VALUE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                .addComponent(jLabelnmTabelas, javax.swing.GroupLayout.PREFERRED_SIZE, 140, javax.swing.GroupLayout.PREFERRED_SIZE))))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(95, 95, 95)
                        .addComponent(jButtonFiltrar)))
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabelNmTabela, javax.swing.GroupLayout.PREFERRED_SIZE, 14, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(jLabelnmTabelas, javax.swing.GroupLayout.PREFERRED_SIZE, 14, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanelFiltrosEnteDois, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanelFiltrosToda, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabelMensagem)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButtonFiltrar, javax.swing.GroupLayout.PREFERRED_SIZE, 23, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        jPanelFiltrosEnteDois.getAccessibleContext().setAccessibleName("Parametros");

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void jButtonFiltrarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButtonFiltrarActionPerformed
        // TODO add your handling code here:
        eventoFiltrarMousePressed();
    }//GEN-LAST:event_jButtonFiltrarActionPerformed

    private void jButtonFiltrarMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_jButtonFiltrarMousePressed
        
    }//GEN-LAST:event_jButtonFiltrarMousePressed

    private void jFormattedTextFieldVElcidadeMaximaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jFormattedTextFieldVElcidadeMaximaActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jFormattedTextFieldVElcidadeMaximaActionPerformed

    private void jFormattedTextFieldQtdePontosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jFormattedTextFieldQtdePontosActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_jFormattedTextFieldQtdePontosActionPerformed
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton jButtonFiltrar;
    private javax.swing.JFormattedTextField jFormattedTextFieldPorcentagem;
    private javax.swing.JFormattedTextField jFormattedTextFieldQtdePontos;
    private javax.swing.JFormattedTextField jFormattedTextFieldTempo;
    private javax.swing.JFormattedTextField jFormattedTextFieldVElcidadeMaxima;
    private javax.swing.JLabel jLabelGostariaRetirar;
    private javax.swing.JLabel jLabelMensagem;
    private javax.swing.JLabel jLabelNmTabela;
    private javax.swing.JLabel jLabelPorcentagem;
    private javax.swing.JLabel jLabelPordentagem;
    private javax.swing.JLabel jLabelQuantoPontos;
    private javax.swing.JLabel jLabelTempo;
    private javax.swing.JLabel jLabelVelocidadeMaxima;
    private javax.swing.JLabel jLabelnmTabelas;
    private javax.swing.JPanel jPanelFiltrosEnteDois;
    private javax.swing.JPanel jPanelFiltrosToda;
    // End of variables declaration//GEN-END:variables

    private void eventoFiltrarMousePressed() {
//        JOptionPane.showMessageDialog(this, "Porcentagem Text= "+this.jFormattedTextFieldPorcentagem.getText()+
//                "Porcentagem Value= "+this.jFormattedTextFieldPorcentagem.getValue());

        Double veloc = null;
        Double tempo = null;
        Double porcent = null;
        Integer qtdePonto = null;

        try {
//            this.jFormattedTextFieldVElcidadeMaxima.commitEdit();
            veloc = ((Long) this.jFormattedTextFieldVElcidadeMaxima.getValue()).doubleValue();
        } catch(NullPointerException np){
        } catch (Exception e) {
            e.printStackTrace();
        }
        try {
//            this.jFormattedTextFieldTempo.commitEdit();
            tempo = ((Long) this.jFormattedTextFieldTempo.getValue()).doubleValue();
        } catch(NullPointerException np){
        }  catch (Exception e) {
            e.printStackTrace();
        }

        try {
//            this.jFormattedTextFieldPorcentagem.commitEdit();
            porcent = ((Long) this.jFormattedTextFieldPorcentagem.getValue()).doubleValue();
        }  catch(NullPointerException np){
        } catch (Exception e) {
            e.printStackTrace();
        }
        try {
//            this.jFormattedTextFieldQtdePontos.commitEdit();
            qtdePonto = ((Long)this.jFormattedTextFieldQtdePontos.getValue()).intValue();
        } catch(NullPointerException np){
        } catch (Exception e) {
            e.printStackTrace();
        }

        if(qtdePonto==null && porcent==null && tempo==null && veloc==null){
            JOptionPane.showMessageDialog(this, "Pelo menos um filtro deve ser informado.");
            return;
        }

        this.trajectoryClean.getFilterClean().setVelocidadeMaxima(veloc);
        this.trajectoryClean.getFilterClean().setTempoMaximo(tempo);
        this.trajectoryClean.getFilterClean().setQtdePontos(qtdePonto);
        this.trajectoryClean.getFilterClean().setPorcentagem(porcent);

        this.trajectoryClean.filtrarTrajetoria();

    }

    private void initEspecifics() {
        this.jLabelMensagem.setText("");
        this.jLabelnmTabelas.setText(this.trajectoryClean.getFilterClean().getListNomeTabelasStr());
    }
}
